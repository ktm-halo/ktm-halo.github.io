// playlist and lyrics //
const videoList = [
  {
    name: "Dame un Kraa",
    link: "https://files.catbox.moe/mi1rkn.webm",
    poster: "poster.jpg",
    lyrics: [
      { time: 7, text: "Dame un Grrraaaaaaa" },
      { time: 10, text: "Every opps sh*t" },
      { time: 14, text: "Dame un Grrraaaaaa" },
      { time: 17, text: "Everything de*d" },
      { time: 20, text: "Kraa kraa b*tch" },
      {
        time: 21,
        text: "Every opps sh*t, everything de*d bố mày xiên ch*t, gi*t hết, mấy thằng oắt con",
      },
      {
        time: 24,
        text: "19 tuổi xuống đường, đ*o thích nhún nhường, chúng mày đ*o lường trước được, better f*ck off",
      },
      { time: 28, text: "Đ*o nể ăn trảm, chỗ bọn tao lên đ*o thể ngăn cản" },
      {
        time: 31,
        text: "Nâng cao sĩ diện, trong cái xã hội, khéo ăn dã vội, 1 nhát, kéo về căn bản",
      },
      { time: 37, text: "Ngày bọn tao tụ họp lượn quanh thành phố" },
      {
        time: 39,
        text: "Money trong bank account khiến tao bỗng trở thành bố",
      },
      {
        time: 41,
        text: "Nhập đoàn dích bẩn, chỗ này có thêm một tập đoàn thích lẩn",
      },
      {
        time: 45,
        text: "Trong thành phố bọn tao chơi đẳng cấp, đ*o thích tiếp mấy thằng vô học chicken",
      },
      {
        time: 48,
        text: "Fake fam fake G sẽ bị cách ly hết, chúng mày có ch*t cũng đ*o bao giờ yên thân",
      },
      {
        time: 52,
        text: "Oai quá oai mồm nổ bốc phét, trước khi xuống đường nên biết rõ cái nguyên nhân",
      },
      {
        time: 55,
        text: "Chuyên mồm chuyên mồm, chuyên bịa cả vẽ, chỗ của bọn tao có mấy thằng chuyên đâm",
      },
      {
        time: 58,
        text: "Cho mấy thằng opps sống không bằng chết, hữu duyên cả mày tao biến nó thành duyên âm",
      },
      {
        time: 62,
        text: "Every opps sh*t, everything de*d bố mày xiên ch*t, gi*t hết, mấy thằng oắt con",
      },
      {
        time: 65,
        text: "19 tuổi xuống đường, đ*o thích nhún nhường, chúng mày đ*o lường trước được, better f*ck off",
      },
      { time: 68, text: "Đ*o nể ăn trảm, chỗ bọn tao lên đ*o thể ngăn cản" },
      {
        time: 72,
        text: "Nâng cao sĩ diện, trong cái xã hội, khéo ăn dã vội, 1 nhát, kéo về căn bản",
      },
      {
        time: 75,
        text: "Ghét em tao thì va thử xem nào hay có lí do khác khiến mày đắn đo sao",
      },
      {
        time: 79,
        text: "Trong tin nhắn luôn có phần vị trí, sao không thử 1 lần gửi vị trí cho tao",
      },
      {
        time: 82,
        text: "Làm người tử tế mới khó còn nếu muốn làm ch* để các bố xuống đường đi săn",
      },
      {
        time: 86,
        text: "It's the H-town send me location my gang, my gang, my gang will come",
      },
      {
        time: 89,
        text: "Bước lên phố nhìn thấy các bố 1 là mày phải ngoan hay là phải biết điều",
      },
      {
        time: 92,
        text: "Đi lên show như vị vua không ngai đang bước vào trong cung điện thiết triều",
      },
      {
        time: 96,
        text: "Fake G, fake G bố mày khuyên thật là chúng mày phải nên tránh ra xa",
      },
      { time: 99, text: "Lil Take với cả 1lane khác l*n gì Notti và DD Osama" },
      {
        time: 103,
        text: "Thủ đô, thủ đô bọn tao phải sinh tồn nên không khoan hồng hay là nhẹ tay",
      },
      { time: 105, text: "Đầu mày sẽ bắt đầu đổ m*u khi Lil Take em tao nói:" },
      { time: 108, text: "DCMM" },
      {
        time: 109,
        text: "Hết giờ, hết giờ, hết giờ oai rồi, hết giờ phông bạt mấy thằng trẻ con ơi",
      },
      {
        time: 113,
        text: "Chỗ các bố mày kiếm tiền chứ không phải chỗ dành cho mấy thằng trẻ con chơi",
      },
    ],
  },

  {
    name: "Hanoi Street",
    link: "https://ia601001.us.archive.org/19/items/ha-noi-pho-lil-take-x-snaky-x-1lane-prod.by-th-4nhd-4t-offcial-mv-2160p-30/Ha%CC%80%20No%CC%A3%CC%82i%20pho%CC%82%CC%81%20-%20Lil%20Take%20x%20Snaky%20x%201lane%20%5Bprod.by%20th4nhd4t%5D%20%28Offcial%20MV%29-%282160p30%29.webm",
    poster: "poster2.png",
    lyrics: [
      {
        time: 7,
        text: "29-D2 không bao giờ mai một, mày muốn đâm bo tao thấy là dại dột",
      },
      { time: 10, text: "Like, like pop, sẽ có thằng phải chột" },
      { time: 13, text: "Đéo chất" },
      {
        time: 14,
        text: "Đá, đá cơm của người khác, sinh ra ở vạch đích nhưng không biết lười nhác",
      },
      {
        time: 17,
        text: "Tao, tao tin vào nhân quả, đâm mười nhát vào tim của kẻ ác",
      },
      { time: 20, text: "Diệt, diệt cỏ tận gốc" },
      { time: 22, text: "Tao chỉ muốn, liệt bỏ tàn khốc" },
      {
        time: 24,
        text: "Thật ngốc khi để cây bật gốc đéo chịu đứng lên lí do là bận khóc",
      },
      { time: 27, text: "Khắc lên tận óc, phần con phần người" },
      { time: 31, text: "Cắn răng ăn đá, vì phần ngon chắc chắn là phần lười" },
      { time: 34, text: "Vị, vi trí của tao" },
      { time: 36, text: "Ngồi hưởng trên nóc/nox" },
      {
        time: 38,
        text: "Vị trí của bọn dốt, tao vẫn đang dọn nốt ở, ở trong cái inbox",
      },
      { time: 40, text: "V, V fuck my block" },
      { time: 42, text: "Stupid bum, suck my cock" },
      { time: 44, text: "On smoke, mandem on crud" },
      { time: 45, text: "Strapped, ride out on opps" },
      { time: 47, text: "Tao cần fame, nên là tao cần cố" },
      { time: 48, text: "Viết thêm nhạc khi mặt trời dần ló" },
      { time: 50, text: "Mày mồ côi, vì mày vẫn cần bố" },
      { time: 52, text: "Đừng talk shit, tao không chung tần số" },
      { time: 53, text: "Tao vẫn nhớ, khi tao sai lần đó" },
      { time: 55, text: "Lòi ra mặt, có thằng ngông thằng chó" },
      { time: 57, text: "Thêm anh em, đó là điều cần có" },
      { time: 58, text: "Vẫn viết tiếp, dù thằng không thằng có" },
      {
        time: 60,
        text: "29-D2 không bao giờ mai một, mày muốn đâm bo tao thấy là dại dột",
      },
      { time: 63, text: "Like Pop, sẽ có thằng phải chột" },
      { time: 66, text: "Đéo chất" },
      {
        time: 67,
        text: "Đá, đá cơm của người khác Sinh ra ở vạch đích nhưng không biết lười nhác",
      },
      {
        time: 70,
        text: "Tao, tao tin vào nhân quả, đâm mười nhát vào tim của kẻ ác",
      },
      { time: 73, text: "D2 E2 P1 bọn tao lấy mọi thứ bản thân xứng đáng" },
      {
        time: 76,
        text: "Sẽ không chiến nếu như không cần thiết vì tao biết trời cao vẫn còn đang chứng giám",
      },
      { time: 79, text: "Ở lại hay là đi là do mày chọn chứ tao không ép" },
      {
        time: 82,
        text: "Tao vẫn có người anh tao vẫn có thằng em chia nhau miếng chăn khi trời đông rét",
      },
      { time: 86, text: "Like, thả vần ra tao sẽ cùng mày tâm sự" },
      { time: 88, text: "Đéo cần dài như là 1 bản văn tự" },
      { time: 90, text: "Đéo cần nói cũng hiểu rõ cái chất rồi" },
      { time: 91, text: "Sống chuẩn nhất nên tao chẳng cần do dự" },
      { time: 93, text: "Cùng anh em mang cái giấc mơ to bự" },
      { time: 95, text: "Bay thật xa nhưng tai chẳng hề lo sợ" },
      {
        time: 96,
        text: "Out of the hood tương lai chuyển màu trắng tươi còn tất cả lũ phản bội mãi mãi chỉ là con nợ",
      },
      { time: 100, text: "New Opps lại đến và rồi ương" },
      { time: 101, text: "Tặng cho chúng nó 1 nhang hương" },
      { time: 103, text: "Fan tao tao sẽ luôn yêu thương" },
      { time: 105, text: "Gái hư thì vẫn còn trên giường" },
      { time: 107, text: "Quá khứ ngông cuồng tao bỏ qua" },
      { time: 108, text: "Nhớ về ông bà giờ ở xa" },
      { time: 110, text: "Tao muốn cha mẹ tao tự hào" },
      { time: 111, text: "Tao muốn vạn vật mãi nở hoa" },
      {
        time: 113,
        text: "29-D2 không bao giờ mai một, mày muốn đâm bo tao thấy là dại dột",
      },
      { time: 117, text: "Like Pop, sẽ có thằng phải chột" },
      { time: 119, text: "Đéo chất" },
      {
        time: 120,
        text: "Đá, đá cơm của người khác Sinh ra ở vạch đích nhưng không biết lười nhác",
      },
      {
        time: 123,
        text: "Tao, tao tin vào nhân quả, đâm mười nhát vào tim của kẻ ác",
      },
      { time: 127, text: "29-P1, trẻ Cầu Giấy nhung nhớ Thủ Đô xưa" },
      {
        time: 130,
        text: "Mấy thằng mõm lúc nào cx đòi va chạm Nhìn lại bản thân xem đã đủ đô chưa",
      },
      {
        time: 133,
        text: "Hay để tao làm căng này sẽ là lúc mày tạm biệt với hàm răng mày",
      },
      {
        time: 136,
        text: "Đã là lính tráng đâu cần phải tính toán Thi đấu mọi địa điểm thời gian ban đêm hoặc là ban ngày",
      },
      {
        time: 140,
        text: "Khi mày va chạm xã hội sẽ khiến mày đủ ớn kèm theo nỗi đau khá lớn",
      },
      {
        time: 143,
        text: "Cuộc sống đường phố sẽ dạy mày khiêm nhường những mối quan hệ không được phép quá trớn",
      },
      {
        time: 147,
        text: "Hướng đến hạnh phúc sức khoẻ và tiền tươi Nhắc đến ba thứ đó 2 thằng em liền cười",
      },
      {
        time: 150,
        text: "3 lý do anh em tao làm việc anh em tao bon chen anh em làm phiền đời",
      },
      { time: 153, text: "Nói ít làm nhiều" },
      { time: 155, text: "Đó là lý do anh em tao kiệm lời" },
      { time: 157, text: "Mấy thằng wack mc" },
      { time: 158, text: "Đến giờ chúng mày khâm liệm rồi" },
      {
        time: 160,
        text: "I aint fuck wit da money and fame its a shame when u left all da homeboys behind",
      },
      {
        time: 163,
        text: "Bum, bum bitch pruuu kraa on car, we flex, slide to da hood, to da side",
      },
    ],
  },

  {
    name: "Clingy",
    link: "https://archive.org/details/clingy-lil-take-x-nguyen-quoc-prod.by-mint-official-mv-2160p-60",
    poster: "poster3.jpg",
    lyrics: [
      {
        time: 13,
        text: "And if we paint a perfect picture, we can make it last forever",
      },
      {
        time: 16,
        text: "And you the only one I want to wear my orange sweater",
      },
      { time: 20, text: "I told you I am down for the worse or the better" },
      {
        time: 23,
        text: "But I keep sticking to you 'cause them four stupid letters",
      },
      { time: 26, text: "You got me singing LOVE" },
      { time: 39, text: "Em, anh chỉ cần anh chỉ cần một mình em" },
      { time: 41, text: "Rơi vào em nó là fact không phải cap" },
      {
        time: 43,
        text: "Baby call me anh đéo cần phải phép Baby là mảnh ghép, không phải xin phép",
      },
      { time: 46, text: "Anh không muốn thấy nước mắt trên đôi mi" },
      { time: 48, text: "Vài chục cây cũng sẽ biến nhanh đôi khi" },
      { time: 49, text: "Một thằng gangster đã trở nên clingy" },
      { time: 51, text: "Vì một khoảnh khắc em nói muốn anh thôi đi" },
      {
        time: 53,
        text: "Chạm vào môi đi, khi mây mù giăng lối , ôm em và trăn trối. Oh baby",
      },
      {
        time: 55,
        text: "Thêm YSL trên cổ anh mở siết chặt eo em/ yeu em my lady",
      },
      { time: 58, text: "C R A Z Y, luôn đúng baby em không sai" },
      {
        time: 61,
        text: "Got bless when I see yo eyes, god damn, thêm bông tai",
      },
      { time: 64, text: "Wow shiet, bình thường thôi" },
      { time: 66, text: "Không bôi son đâu anh sẽ làm em trôi" },
      { time: 68, text: "Anh không muốn chỉ nhìn em vào đêm tối" },
      { time: 69, text: "Superstisious Không cần có lỗi" },
      { time: 71, text: "Fuck, fuck, baby, hãy cho anh đường đi" },
      {
        time: 74,
        text: "Hình như người đẹp trai thường suy Không dám mơ điều thần kỳ",
      },
      {
        time: 77,
        text: "Nếu ta vẽ nên được một bức tranh không có lỗi sai, nó có đẹp mãi đâu",
      },
      {
        time: 81,
        text: "Và em chỉ em mỗi em khiến anh muốn nhân lên thêm vài nỗi đau",
      },
      {
        time: 84,
        text: "Đừng thêm lí do để xa, đừng cho hai ta phải dỗi nhau",
      },
      {
        time: 87,
        text: "Và anh đã yêu mất em vì những lời ca em hát về mãi sau.",
      },
      { time: 92, text: "Baby có tiếc nuối khi đôi ta giờ đây chẳng có nhau" },
      {
        time: 98,
        text: "Giọt nước mắt trên mi khiến anh đau thêm đến tận mãi sau",
      },
      {
        time: 103,
        text: "Tìm lại kỉ niệm ngày xưa, giờ đã chẳng còn người nữa",
      },
      {
        time: 106,
        text: "Vết thương kia nó chưa lành, con tim anh vỡ nát tan tành",
      },
      { time: 110, text: "Định gọi cho em rồi thôi, định gọi cho em rồi thôi" },
      {
        time: 113,
        text: "Anh luôn bỏ lỡ cơ hội và để tuột mất em đi trong vòng tay người mới",
      },
      { time: 116, text: "Chẳng còn đâu Chẳng buồn đau" },
      { time: 118, text: "Kẹt sâu ở bên trong tâm trí anh, nói ra, ngỡ là" },
      { time: 121, text: "Người lại quay về đây với anh" },
      {
        time: 123,
        text: "Người vội đi Như mọi khi, chẳng cần đến một giây suy nghĩ",
      },
      { time: 126, text: "Oh babi babi Okee vậy em cứ đi" },
      {
        time: 129,
        text: "Bầu trời này vẫn cứ thế đổi thay lặng ngồi mình anh chơi với",
      },
      {
        time: 132,
        text: "Ngước mắt lên kia bơ phờ con tim của anh như vỡ đôi",
      },
      { time: 135, text: "Chỉ muốn được tìm bình yên nhưng đó là khi có em" },
      { time: 139, text: "Xóa đi hết bao ưu phiền mong em ở bên mỗi đêm" },
      { time: 145, text: "Uhmmm" },
      {
        time: 154,
        text: "Nếu ta vẽ nên được một bức tranh không có lỗi sai, nó có đẹp mãi đâu",
      },
      {
        time: 158,
        text: "Và em chỉ em mỗi em khiến anh muốn nhân lên thêm vài nỗi đau",
      },
      {
        time: 161,
        text: "Đừng thêm lí do để xa, đừng cho hai ta phải dỗi nhau",
      },
      {
        time: 164,
        text: "Và anh đã yêu mất em vì những lời ca em hát về mãi sau.",
      },
    ],
  },
];

let currentIndex = 0;
let likeCount = 0;

// dom
const myVideo = document.querySelector("#my-video");
const playPauseButton = document.querySelector("#play-pause-btn");
const playPauseImg = document.querySelector("#play-pause-img");
const muteUnmuteButton = document.querySelector("#mute-unmute-btn");
const muteUnmuteImg = document.querySelector("#mute-unmute-img");
const prevButton = document.querySelector("#previous-btn");
const nextButton = document.querySelector("#next-btn");

const progressBar = document.querySelector(".progress-bar");
const progressBarFill = document.querySelector("#progress-bar-fill");

const videoNameSpan = document.querySelector("#video-name");

const likeButton = document.querySelector("#like-btn");
const likesSpan = document.querySelector("#likes");

const lyricsBtn = document.querySelector("#lyrics-toggle-btn");
const creditBtn = document.querySelector("#credit-toggle-btn");
const lyricsBox = document.querySelector("#lyrics-box");
const creditBox = document.querySelector("#credit-box");

const sidePanel = document.querySelector(".video-list");
const carouselTrack = document.getElementById("carousel-track");

const volumeSlider = document.querySelector("#volume-slider");

window.addEventListener("DOMContentLoaded", () => {
  if (!myVideo) return;

  //Adjust the video volume and slider position
  myVideo.src = videoList[currentIndex].link;
  myVideo.volume = 0.8;
  if (volumeSlider)
    volumeSlider.value = myVideo.muted ? 0 : myVideo.volume ?? 0.8;

  updateVideoMetaName();
  renderLyrics(currentIndex);
  bindCoreEvents();
  renderCarousel();
  // like count
  if (likesSpan) likesSpan.textContent = likeCount;
});

// event
function bindCoreEvents() {
  playPauseButton?.addEventListener("click", togglePlay);
  muteUnmuteButton?.addEventListener("click", toggleAudio);
  prevButton?.addEventListener("click", prevTrack);
  nextButton?.addEventListener("click", nextTrack);

  myVideo.addEventListener("timeupdate", onVideoProgress);
  myVideo.addEventListener("seeked", onVideoProgress);
  myVideo.addEventListener("loadedmetadata", () => {
    updateVideoMetaName();
    syncPanelHeight();
    updateCarouselActive();
  });
  window.addEventListener("resize", syncPanelHeight);

  progressBar?.addEventListener("click", seekByClick);

  likeButton?.addEventListener("click", () => {
    likeCount++;
    if (likesSpan) likesSpan.textContent = likeCount;
  });

  if (lyricsBtn && creditBtn && lyricsBox && creditBox) {
    lyricsBtn.addEventListener("click", () => {
      lyricsBtn.classList.add("active");
      creditBtn.classList.remove("active");
      lyricsBox.style.display = "block";
      creditBox.style.display = "none";
      highlightCurrentLyric(myVideo.currentTime || 0);
    });
    creditBtn.addEventListener("click", () => {
      creditBtn.classList.add("active");
      lyricsBtn.classList.remove("active");
      creditBox.style.display = "block";
      lyricsBox.style.display = "none";
    });
  }

  volumeSlider?.addEventListener("input", () => {
    const v = parseFloat(volumeSlider.value);
    myVideo.volume = v;
    if (v === 0 && !myVideo.muted) {
      myVideo.muted = true;
      muteUnmuteImg &&
        (muteUnmuteImg.src =
          "https://img.icons8.com/ios-glyphs/30/no-audio--v1.png");
    } else if (v > 0 && myVideo.muted) {
      myVideo.muted = false;
      muteUnmuteImg &&
        (muteUnmuteImg.src =
          "https://img.icons8.com/ios-glyphs/30/high-volume--v1.png");
    }
  });

  myVideo.addEventListener("volumechange", () => {
    if (!volumeSlider) return;
    volumeSlider.value = myVideo.muted ? 0 : myVideo.volume ?? 0;
  });

  myVideo.addEventListener("dblclick", toggleFullscreen);
}

// video controls
// play / pause + mute / unmute
function togglePlay() {
  if (myVideo.paused) {
    myVideo.play();
    playPauseImg &&
      (playPauseImg.src = "https://img.icons8.com/ios-glyphs/30/pause--v1.png");
  } else {
    myVideo.pause();
    playPauseImg &&
      (playPauseImg.src = "https://img.icons8.com/ios-glyphs/30/play--v1.png");
  }
}

function toggleAudio() {
  myVideo.muted = !myVideo.muted;
  if (muteUnmuteImg) {
    muteUnmuteImg.src = myVideo.muted
      ? "https://img.icons8.com/ios-glyphs/30/no-audio--v1.png"
      : "https://img.icons8.com/ios-glyphs/30/high-volume--v1.png";
  }
  if (volumeSlider)
    volumeSlider.value = myVideo.muted ? 0 : myVideo.volume ?? 0.8;
}

// playlist controls
function prevTrack() {
  currentIndex = (currentIndex - 1 + videoList.length) % videoList.length;
  playVideoAtIndex(currentIndex);
}

function nextTrack() {
  currentIndex = (currentIndex + 1) % videoList.length;
  playVideoAtIndex(currentIndex);
}

// change lyrics by MV
function playVideoAtIndex(index) {
  myVideo.pause();
  myVideo.src = videoList[index].link;
  myVideo.load();
  myVideo.play().catch(() => {
    playPauseImg &&
      (playPauseImg.src = "https://img.icons8.com/ios-glyphs/30/play--v1.png");
  });

  updateVideoMetaName();
  renderLyrics(index);
  progressBarFill && (progressBarFill.style.width = "0%");
  updateCarouselActive();
}

// progress bar + sync lyrics
function onVideoProgress() {
  if (myVideo.duration && progressBarFill) {
    const percent = (myVideo.currentTime / myVideo.duration) * 100;
    progressBarFill.style.width = `${percent}%`;
  }
  highlightCurrentLyric(myVideo.currentTime || 0);
}

function seekByClick(e) {
  const rect = progressBar.getBoundingClientRect();
  const ratio = Math.min(Math.max((e.clientX - rect.left) / rect.width, 0), 1);
  if (myVideo.duration) myVideo.currentTime = ratio * myVideo.duration;
}

// video meta
function updateVideoMetaName() {
  const cur = videoList[currentIndex];
  if (videoNameSpan) videoNameSpan.textContent = cur?.name || "";
}

// lyrics
function renderLyrics(index) {
  if (!lyricsBox) return;
  lyricsBox.innerHTML = "";
  const lyricsData = videoList[index].lyrics || [];
  lyricsData.forEach((line) => {
    const p = document.createElement("p");
    p.dataset.time = line.time;
    p.textContent = line.text;
    lyricsBox.appendChild(p);
  });
}

function highlightCurrentLyric(currentTime) {
  if (!lyricsBox) return;
  const lines = lyricsBox.querySelectorAll("p[data-time]");
  if (!lines.length) return;

  let active = null;
  lines.forEach((line) => {
    const t = parseFloat(line.dataset.time);
    line.classList.remove("highlight");
    if (!Number.isNaN(t) && currentTime >= t) active = line;
  });

  if (active) {
    active.classList.add("highlight");
    active.scrollIntoView({ behavior: "smooth", block: "nearest" });
  }
}

// double click to fullscreen
function toggleFullscreen() {
  if (!document.fullscreenElement) myVideo.requestFullscreen?.();
  else document.exitFullscreen?.();
}

// panel height fix
function syncPanelHeight() {
  if (!sidePanel || !myVideo) return;
  sidePanel.style.height = myVideo.clientHeight + "px";
}

// carousel
function renderCarousel() {
  if (!carouselTrack) return;
  carouselTrack.innerHTML = "";

  videoList.forEach((item, idx) => {
    const btn = document.createElement("button");
    btn.className = "thumb" + (idx === currentIndex ? " active" : "");
    btn.type = "button";
    btn.dataset.index = idx;

    btn.innerHTML = `
      <img src="${item.poster}" alt="${item.name}" loading="lazy" />
      <span class="caption">${item.name}</span>
    `;

    btn.addEventListener("click", () => {
      if (idx === currentIndex) return;
      currentIndex = idx;
      playVideoAtIndex(currentIndex);
    });

    carouselTrack.appendChild(btn);
  });
}

function updateCarouselActive() {
  if (!carouselTrack) return;
  [...carouselTrack.children].forEach((el, i) => {
    el.classList.toggle("active", i === currentIndex);
  });
}
